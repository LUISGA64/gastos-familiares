{% extends 'gastos/base.html' %}

{% block title %}Planes y Precios - Gastos Familiares{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="text-center mb-5">
        <h1 class="display-4">Elige el Plan Perfecto para tu Familia</h1>
        <p class="lead text-muted">Gestiona tus finanzas de forma inteligente y transparente</p>
        <p class="text-muted">
            <i class="bi bi-check-circle-fill text-success"></i> Sin sorpresas en los gastos
            <i class="bi bi-check-circle-fill text-success ms-3"></i> Conciliaci√≥n autom√°tica
            <i class="bi bi-check-circle-fill text-success ms-3"></i> 100% privado y seguro
        </p>
    </div>

    <!-- Beneficios Generales -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="alert alert-info">
                <h5 class="alert-heading"><i class="bi bi-lightbulb-fill"></i> ¬øPor qu√© usar Gastos Familiares?</h5>
                <div class="row mt-3">
                    <div class="col-md-3">
                        <strong><i class="bi bi-calculator"></i> Distribuci√≥n Justa</strong>
                        <p class="small mb-0">Cada aportante paga seg√∫n sus ingresos, autom√°ticamente</p>
                    </div>
                    <div class="col-md-3">
                        <strong><i class="bi bi-graph-up"></i> Conciliaci√≥n Mensual</strong>
                        <p class="small mb-0">Sabe qui√©n debe reintegrar y cu√°nto, sin discusiones</p>
                    </div>
                    <div class="col-md-3">
                        <strong><i class="bi bi-shield-check"></i> Privacidad Total</strong>
                        <p class="small mb-0">Tus datos nunca se comparten con otras familias</p>
                    </div>
                    <div class="col-md-3">
                        <strong><i class="bi bi-phone"></i> Acceso 24/7</strong>
                        <p class="small mb-0">Desde cualquier dispositivo, en cualquier momento</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        {% for plan in planes %}
        <div class="col-md-3 mb-4">
            <div class="card h-100 {% if plan.tipo == 'PREMIUM' %}border-primary shadow-lg{% elif plan.tipo == 'GRATIS' %}border-secondary{% endif %}">
                {% if plan.tipo == 'PREMIUM' %}
                <div class="card-header bg-primary text-white text-center">
                    <small>‚≠ê M√ÅS POPULAR ‚≠ê</small>
                </div>
                {% elif plan.tipo == 'GRATIS' %}
                <div class="card-header bg-secondary text-white text-center">
                    <small>COMIENZA AQU√ç</small>
                </div>
                {% endif %}

                <div class="card-body text-center">
                    <h3 class="card-title">{{ plan.nombre }}</h3>

                    <div class="display-4 my-4">
                        {% if plan.precio_mensual == 0 %}
                        <span class="text-success">GRATIS</span>
                        {% else %}
                        <small class="text-muted" style="font-size: 1.5rem;">$</small>
                        {{ plan.precio_mensual|floatformat:0 }}
                        <small class="text-muted" style="font-size: 1rem;">/mes</small>
                        {% endif %}
                    </div>

                    {% if plan.dias_prueba > 0 %}
                    <div class="alert alert-success py-2">
                        <i class="bi bi-gift"></i> <strong>{{ plan.dias_prueba }} d√≠as gratis</strong>
                    </div>
                    {% endif %}

                    <!-- Caso de uso real -->
                    <div class="bg-light p-3 rounded mb-3">
                        <small class="text-muted">
                            <strong>Ideal para:</strong><br>
                            {% if plan.tipo == 'GRATIS' %}
                            <i class="bi bi-people"></i> Parejas que comienzan a vivir juntos
                            {% elif plan.tipo == 'BASICO' %}
                            <i class="bi bi-house"></i> Familias de 3-4 personas
                            {% elif plan.tipo == 'PREMIUM' %}
                            <i class="bi bi-building"></i> Familias grandes o con muchos gastos
                            {% else %}
                            <i class="bi bi-briefcase"></i> Asesores financieros y empresas
                            {% endif %}
                        </small>
                    </div>

                    <hr>

                    <!-- Caracter√≠sticas principales -->
                    <div class="text-start mb-3">
                        <h6 class="text-primary"><i class="bi bi-check-circle"></i> Incluye:</h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="bi bi-people-fill text-success"></i>
                                {% if plan.max_aportantes == 999 %}
                                <strong>Aportantes ilimitados</strong>
                                {% else %}
                                Hasta <strong>{{ plan.max_aportantes }} aportantes</strong>
                                {% endif %}
                                <br><small class="text-muted">
                                    {% if plan.tipo == 'GRATIS' %}
                                    Ejemplo: T√∫ y tu pareja
                                    {% elif plan.tipo == 'BASICO' %}
                                    Ejemplo: Pap√°, mam√° y 2 hijos
                                    {% else %}
                                    Para familias de cualquier tama√±o
                                    {% endif %}
                                </small>
                            </li>
                            <li class="mb-2">
                                <i class="bi bi-receipt text-success"></i>
                                {% if plan.max_gastos_mes == 999999 %}
                                <strong>Gastos ilimitados</strong>
                                {% else %}
                                <strong>{{ plan.max_gastos_mes }} gastos/mes</strong>
                                {% endif %}
                                <br><small class="text-muted">
                                    {% if plan.tipo == 'GRATIS' %}
                                    ~1 gasto por d√≠a
                                    {% elif plan.tipo == 'BASICO' %}
                                    ~3 gastos por d√≠a
                                    {% else %}
                                    Registra todo sin l√≠mites
                                    {% endif %}
                                </small>
                            </li>
                            <li class="mb-2">
                                <i class="bi bi-tags text-success"></i>
                                {% if plan.max_categorias == 999 %}
                                <strong>Categor√≠as ilimitadas</strong>
                                {% else %}
                                <strong>{{ plan.max_categorias }} categor√≠as</strong>
                                {% endif %}
                                <br><small class="text-muted">
                                    Organiza tus gastos por tipo
                                </small>
                            </li>
                        </ul>
                    </div>

                    <!-- Caracter√≠sticas adicionales espec√≠ficas -->
                    <div class="text-start mb-3">
                        <h6 class="text-success"><i class="bi bi-star-fill"></i> Caracter√≠sticas:</h6>
                        <div class="small">
                            <!-- Caracter√≠sticas b√°sicas (todos) -->
                            <div class="mb-2">
                                <i class="bi bi-check-circle-fill text-success"></i> Distribuci√≥n autom√°tica<br>
                                <i class="bi bi-check-circle-fill text-success"></i> Gesti√≥n de categor√≠as<br>
                                <i class="bi bi-check-circle-fill text-success"></i> Dashboard b√°sico
                            </div>

                            <!-- Caracter√≠sticas premium -->
                            {% if plan.permite_reportes_avanzados %}
                            <div class="alert alert-success py-2 mb-2">
                                <strong><i class="bi bi-graph-up"></i> Reportes Avanzados</strong><br>
                                <small>Gr√°ficos interactivos, an√°lisis de tendencias</small>
                            </div>
                            {% else %}
                            <div class="text-muted small">
                                <i class="bi bi-x-circle"></i> Reportes avanzados
                            </div>
                            {% endif %}

                            {% if plan.permite_conciliacion_automatica %}
                            <div class="alert alert-info py-2 mb-2">
                                <strong><i class="bi bi-calculator"></i> Conciliaci√≥n Autom√°tica</strong><br>
                                <small>Calcula qui√©n debe reintegrar autom√°ticamente</small>
                            </div>
                            {% else %}
                            <div class="text-muted small">
                                <i class="bi bi-x-circle"></i> Conciliaci√≥n autom√°tica
                            </div>
                            {% endif %}

                            {% if plan.permite_notificaciones_email %}
                            <div class="alert alert-warning py-2 mb-2">
                                <strong><i class="bi bi-envelope"></i> Notificaciones Email</strong><br>
                                <small>Alertas, recordatorios, res√∫menes mensuales</small>
                            </div>
                            {% else %}
                            <div class="text-muted small">
                                <i class="bi bi-x-circle"></i> Notificaciones email
                            </div>
                            {% endif %}

                            {% if plan.permite_historial_completo %}
                            <div class="text-success small mb-1">
                                <i class="bi bi-clock-history"></i> <strong>Historial ilimitado</strong>
                            </div>
                            {% else %}
                            <div class="text-warning small mb-1">
                                <i class="bi bi-exclamation-triangle"></i> Historial limitado (3 meses)
                            </div>
                            {% endif %}

                            {% if plan.max_archivos_adjuntos > 0 %}
                            <div class="text-success small mb-1">
                                <i class="bi bi-paperclip"></i> <strong>{{ plan.max_archivos_adjuntos }} archivo(s) adjunto(s)</strong>
                            </div>
                            {% else %}
                            <div class="text-muted small">
                                <i class="bi bi-x-circle"></i> Sin archivos adjuntos
                            </div>
                            {% endif %}

                            {% if plan.permite_exportar_datos %}
                            <div class="text-success small mb-1">
                                <i class="bi bi-download"></i> <strong>Exportar a Excel/PDF</strong>
                            </div>
                            {% else %}
                            <div class="text-muted small">
                                <i class="bi bi-x-circle"></i> Sin exportaci√≥n de datos
                            </div>
                            {% endif %}

                            <hr class="my-2">

                            {% if plan.soporte_prioritario %}
                            <div class="text-primary small">
                                <i class="bi bi-headset"></i> <strong>Soporte prioritario (&lt;24 hrs)</strong>
                            </div>
                            {% elif plan.tipo == 'BASICO' %}
                            <div class="text-info small">
                                <i class="bi bi-headset"></i> Soporte est√°ndar (24-48 hrs)
                            </div>
                            {% else %}
                            <div class="text-muted small">
                                <i class="bi bi-envelope"></i> Soporte por email (48-72 hrs)
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Destacar valor del plan B√°sico -->
                    {% if plan.tipo == 'BASICO' %}
                    <div class="alert alert-primary py-2">
                        <strong><i class="bi bi-lightning-fill"></i> ¬°Mejor relaci√≥n calidad-precio!</strong><br>
                        <small>Todo lo que necesitas para gestionar tu familia</small>
                    </div>
                    {% endif %}

                    <div class="d-grid gap-2 mt-auto">
                        {% if plan.precio_mensual == 0 %}
                        <a href="{% url 'registro' %}" class="btn btn-outline-success">
                            <i class="bi bi-rocket"></i> Comenzar Gratis
                        </a>
                        {% else %}
                        <a href="#" class="btn btn-primary btn-lg" data-plan="{{ plan.id }}">
                            {% if plan.dias_prueba > 0 %}
                            <i class="bi bi-gift"></i> Probar {{ plan.dias_prueba }} d√≠as gratis
                            {% else %}
                            Comprar Ahora
                            {% endif %}
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Tabla Comparativa de Caracter√≠sticas -->
    <div class="row mt-5 mb-5">
        <div class="col-12">
            <h2 class="text-center mb-4">
                <i class="bi bi-table"></i> Comparaci√≥n Detallada de Planes
            </h2>
            <p class="text-center text-muted mb-4">Encuentra el plan perfecto para tus necesidades</p>
        </div>

        <div class="col-12">
            <div class="table-responsive">
                <table class="table table-bordered table-hover">
                    <thead class="table-primary">
                        <tr>
                            <th style="width: 30%;">Caracter√≠stica</th>
                            <th class="text-center" style="width: 17.5%;">
                                <i class="bi bi-gift"></i> GRATUITO
                            </th>
                            <th class="text-center bg-warning" style="width: 17.5%;">
                                <i class="bi bi-star-fill"></i> B√ÅSICO<br>
                                <small class="badge bg-primary">Recomendado</small>
                            </th>
                            <th class="text-center" style="width: 17.5%;">
                                <i class="bi bi-trophy"></i> PREMIUM
                            </th>
                            <th class="text-center" style="width: 17.5%;">
                                <i class="bi bi-building"></i> EMPRESARIAL
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Precio Mensual</strong></td>
                            <td class="text-center">$0</td>
                            <td class="text-center bg-light"><strong>$9,900</strong></td>
                            <td class="text-center">$15,900</td>
                            <td class="text-center">$49,900</td>
                        </tr>
                        <tr>
                            <td><strong>Aportantes</strong></td>
                            <td class="text-center">2</td>
                            <td class="text-center bg-light"><strong>4</strong></td>
                            <td class="text-center">8</td>
                            <td class="text-center">Ilimitados</td>
                        </tr>
                        <tr>
                            <td><strong>Gastos por Mes</strong></td>
                            <td class="text-center">30</td>
                            <td class="text-center bg-light"><strong>100</strong></td>
                            <td class="text-center">500</td>
                            <td class="text-center">Ilimitados</td>
                        </tr>
                        <tr>
                            <td><strong>Categor√≠as</strong></td>
                            <td class="text-center">5</td>
                            <td class="text-center bg-light"><strong>15</strong></td>
                            <td class="text-center">50</td>
                            <td class="text-center">Ilimitadas</td>
                        </tr>
                        <tr class="table-info">
                            <td colspan="5"><strong><i class="bi bi-star"></i> Caracter√≠sticas Premium</strong></td>
                        </tr>
                        <tr>
                            <td><i class="bi bi-graph-up"></i> Reportes Avanzados</td>
                            <td class="text-center"><span class="text-danger">‚úó</span></td>
                            <td class="text-center bg-light"><span class="text-success fs-5">‚úì</span></td>
                            <td class="text-center"><span class="text-success fs-5">‚úì</span></td>
                            <td class="text-center"><span class="text-success fs-5">‚úì</span></td>
                        </tr>
                        <tr>
                            <td><i class="bi bi-calculator"></i> Conciliaci√≥n Autom√°tica</td>
                            <td class="text-center"><span class="text-danger">‚úó</span></td>
                            <td class="text-center bg-light"><span class="text-success fs-5">‚úì</span></td>
                            <td class="text-center"><span class="text-success fs-5">‚úì</span></td>
                            <td class="text-center"><span class="text-success fs-5">‚úì</span></td>
                        </tr>
                        <tr>
                            <td><i class="bi bi-envelope"></i> Notificaciones Email</td>
                            <td class="text-center"><span class="text-danger">‚úó</span></td>
                            <td class="text-center bg-light"><span class="text-success fs-5">‚úì</span></td>
                            <td class="text-center"><span class="text-success fs-5">‚úì</span></td>
                            <td class="text-center"><span class="text-success fs-5">‚úì</span></td>
                        </tr>
                        <tr>
                            <td><i class="bi bi-clock-history"></i> Historial</td>
                            <td class="text-center text-warning">Solo 3 meses</td>
                            <td class="text-center bg-light"><strong class="text-success">Ilimitado</strong></td>
                            <td class="text-center"><strong class="text-success">Ilimitado</strong></td>
                            <td class="text-center"><strong class="text-success">Ilimitado</strong></td>
                        </tr>
                        <tr>
                            <td><i class="bi bi-paperclip"></i> Archivos Adjuntos</td>
                            <td class="text-center"><span class="text-danger">0</span></td>
                            <td class="text-center bg-light"><strong>1 por gasto</strong></td>
                            <td class="text-center"><strong>5 por gasto</strong></td>
                            <td class="text-center"><strong>10 por gasto</strong></td>
                        </tr>
                        <tr>
                            <td><i class="bi bi-download"></i> Exportar Datos</td>
                            <td class="text-center"><span class="text-danger">‚úó</span></td>
                            <td class="text-center bg-light"><span class="text-danger">‚úó</span></td>
                            <td class="text-center"><span class="text-success fs-5">‚úì</span> Excel/PDF</td>
                            <td class="text-center"><span class="text-success fs-5">‚úì</span> Excel/PDF/CSV</td>
                        </tr>
                        <tr>
                            <td><i class="bi bi-headset"></i> Soporte</td>
                            <td class="text-center text-muted">48-72 hrs</td>
                            <td class="text-center bg-light"><strong>24-48 hrs</strong></td>
                            <td class="text-center"><strong class="text-primary">&lt;24 hrs</strong></td>
                            <td class="text-center"><strong class="text-success">Dedicado</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="alert alert-warning mt-3">
                <i class="bi bi-lightbulb-fill"></i> <strong>Recomendaci√≥n:</strong>
                El <strong>Plan B√°sico</strong> ofrece la mejor relaci√≥n calidad-precio para familias normales.
                Por solo $9,900/mes obtienes reportes avanzados, conciliaci√≥n autom√°tica, notificaciones y
                historial ilimitado. ¬°Perfecto para parejas y familias peque√±as!
            </div>
        </div>
    </div>

    <!-- Casos de Uso Reales -->
    <div class="row mt-5 mb-4">
        <div class="col-12">
            <h2 class="text-center mb-4">
                <i class="bi bi-lightbulb"></i> Casos de Uso Reales
            </h2>
            <p class="text-center text-muted mb-5">Ve c√≥mo otras familias est√°n usando Gastos Familiares</p>
        </div>
    </div>

    <div class="row mb-5">
        <div class="col-md-4 mb-4">
            <div class="card h-100 border-success">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-people"></i> Caso: Pareja Joven</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>Juan y Mar√≠a</strong> - Plan B√°sico<br>
                        <small class="text-muted">Medell√≠n, Antioquia</small>
                    </p>

                    <div class="bg-light p-3 rounded mb-3">
                        <strong>Situaci√≥n:</strong>
                        <ul class="small mb-0">
                            <li>Juan gana: $2,500,000 (45.5%)</li>
                            <li>Mar√≠a gana: $3,000,000 (54.5%)</li>
                            <li>Total ingresos: $5,500,000</li>
                        </ul>
                    </div>

                    <div class="alert alert-info py-2">
                        <strong><i class="bi bi-star-fill"></i> Resultado:</strong>
                        <p class="small mb-0">
                            "Antes pele√°bamos por qui√©n pagaba qu√©. Ahora el sistema calcula autom√°ticamente y cada uno paga seg√∫n gana. ¬°Sin discusiones!"
                        </p>
                    </div>

                    <strong class="text-success">Ahorro de tiempo: 5 horas/mes</strong>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="card h-100 border-primary">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-house"></i> Caso: Familia de 4</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>Familia Rodr√≠guez</strong> - Plan Premium<br>
                        <small class="text-muted">Bogot√°, Cundinamarca</small>
                    </p>

                    <div class="bg-light p-3 rounded mb-3">
                        <strong>Situaci√≥n:</strong>
                        <ul class="small mb-0">
                            <li>Padres trabajan (2 aportantes)</li>
                            <li>2 hijos universitarios</li>
                            <li>~150 gastos mensuales</li>
                        </ul>
                    </div>

                    <div class="alert alert-info py-2">
                        <strong><i class="bi bi-star-fill"></i> Resultado:</strong>
                        <p class="small mb-0">
                            "Redujimos gastos en 18% al ver claramente d√≥nde se iba el dinero. Los reportes nos ayudaron a tomar mejores decisiones."
                        </p>
                    </div>

                    <strong class="text-success">Ahorro mensual: $850,000</strong>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4">
            <div class="card h-100 border-warning">
                <div class="card-header bg-warning">
                    <h5 class="mb-0"><i class="bi bi-briefcase"></i> Caso: Asesor Financiero</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>Luis Garc√≠a</strong> - Plan Empresarial<br>
                        <small class="text-muted">Cali, Valle del Cauca</small>
                    </p>

                    <div class="bg-light p-3 rounded mb-3">
                        <strong>Situaci√≥n:</strong>
                        <ul class="small mb-0">
                            <li>Asesora a 8 familias</li>
                            <li>Cobra $150,000/familia/mes</li>
                        </ul>
                    </div>

                    <div class="alert alert-info py-2">
                        <strong><i class="bi bi-star-fill"></i> Resultado:</strong>
                        <p class="small mb-0">
                            "Mis clientes est√°n encantados. Les muestro c√≥mo optimizar gastos. Es una herramienta profesional."
                        </p>
                    </div>

                    <strong class="text-success">Ingreso adicional: $1,200,000/mes</strong>
                </div>
            </div>
        </div>
    </div>

    <!-- Ejemplo Pr√°ctico de Conciliaci√≥n -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card border-info">
                <div class="card-header bg-info text-white">
                    <h4 class="mb-0"><i class="bi bi-calculator-fill"></i> Ejemplo Real: ¬øC√≥mo funciona la Conciliaci√≥n?</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5>Antes (Sin Gastos Familiares) üò©</h5>
                            <div class="bg-light p-3 rounded">
                                <strong>Mes de Enero:</strong>
                                <ul class="small">
                                    <li>Juan pag√≥: Arriendo, Mercado, Luz...</li>
                                    <li>Mar√≠a pag√≥: Internet, Gas...</li>
                                </ul>
                                <div class="alert alert-danger py-2">
                                    <strong>Problema:</strong><br>
                                    üò§ Peleas y discusiones<br>
                                    ‚è∞ Horas calculando<br>
                                    ‚ùå Nunca queda claro
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <h5>Despu√©s (Con Gastos Familiares) üòä</h5>
                            <div class="bg-light p-3 rounded">
                                <strong>Sistema Calcula:</strong>
                                <table class="table table-sm mt-2 small">
                                    <tr>
                                        <td><strong>Juan (45.5%)</strong></td>
                                        <td>Debe: $1,443,773</td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>Pag√≥: $2,395,000</td>
                                    </tr>
                                    <tr class="table-success">
                                        <td colspan="2"><strong>Balance: +$951,227 ‚úÖ</strong></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Mar√≠a (54.5%)</strong></td>
                                        <td>Debe: $1,732,527</td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>Pag√≥: $781,300</td>
                                    </tr>
                                    <tr class="table-danger">
                                        <td colspan="2"><strong>Balance: -$951,227 ‚ùå</strong></td>
                                    </tr>
                                </table>
                                <div class="alert alert-success py-2 small">
                                    <strong>Soluci√≥n:</strong><br>
                                    üí∏ Mar√≠a transfiere <strong>$951,227</strong> a Juan<br>
                                    ‚úÖ Sin discusiones | ‚ö° En 2 segundos
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Estad√≠sticas -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="alert alert-success">
                <div class="row text-center">
                    <div class="col-md-3">
                        <h2 class="display-4">94%</h2>
                        <p class="mb-0">Reducen discusiones</p>
                    </div>
                    <div class="col-md-3">
                        <h2 class="display-4">5hrs</h2>
                        <p class="mb-0">Ahorradas/mes</p>
                    </div>
                    <div class="col-md-3">
                        <h2 class="display-4">15%</h2>
                        <p class="mb-0">Ahorro mensual</p>
                    </div>
                    <div class="col-md-3">
                        <h2 class="display-4">100%</h2>
                        <p class="mb-0">Privacidad</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-question-circle"></i> Preguntas Frecuentes</h5>
                </div>
                <div class="card-body">
                    <div class="accordion" id="faqAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                    ¬øC√≥mo funciona el per√≠odo de prueba?
                                </button>
                            </h2>
                            <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Los planes con per√≠odo de prueba te permiten usar todas las funcionalidades Premium sin costo durante el tiempo especificado. No se requiere m√©todo de pago para comenzar tu prueba. Al finalizar, puedes continuar pagando con Bancolombia o Nequi mediante c√≥digos QR.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                    ¬øPuedo cambiar de plan despu√©s?
                                </button>
                            </h2>
                            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    S√≠, puedes actualizar o bajar de plan en cualquier momento. Los cambios se aplican inmediatamente.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                    ¬øMis datos est√°n seguros?
                                </button>
                            </h2>
                            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Absolutamente. Cada familia tiene sus datos completamente separados y protegidos. Utilizamos Django (framework l√≠der en seguridad web) con autenticaci√≥n robusta y control de acceso estricto. Nadie m√°s puede acceder a tu informaci√≥n financiera. Los datos se almacenan en servidores seguros con copias de seguridad autom√°ticas.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                    ¬øQu√© m√©todos de pago aceptan?
                                </button>
                            </h2>
                            <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    <strong>M√©todos disponibles ahora:</strong>
                                    <ul class="mb-3">
                                        <li><i class="bi bi-bank text-warning"></i> Bancolombia (Transferencia con QR)</li>
                                        <li><i class="bi bi-wallet2 text-danger"></i> Nequi (Pago con QR)</li>
                                    </ul>
                                    <strong>Pr√≥ximamente:</strong>
                                    <ul class="mb-0">
                                        <li><i class="bi bi-credit-card"></i> Tarjetas de Cr√©dito/D√©bito</li>
                                        <li><i class="bi bi-globe"></i> PSE (Pagos Seguros en L√≠nea)</li>
                                        <li><i class="bi bi-phone"></i> DaviPlata</li>
                                    </ul>
                                    <div class="alert alert-info mt-3 mb-0">
                                        <small><i class="bi bi-info-circle"></i> Todos los pagos son verificados manualmente para garantizar tu seguridad.</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="text-center mt-5 mb-5">
        <h3>¬øTienes dudas?</h3>
        <p class="lead">Cont√°ctanos a <a href="mailto:soporte@gastosfa miliares.com">soporte@gastosfamiliares.com</a></p>
        <p>O escr√≠benos por WhatsApp: <a href="https://wa.me/573117009855" target="_blank">+57 311 700 9855</a></p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Integraci√≥n con sistema de pagos QR
document.querySelectorAll('[data-plan]').forEach(btn => {
    btn.addEventListener('click', function(e) {
        e.preventDefault();
        const planId = this.getAttribute('data-plan');

        // Verificar si el usuario est√° autenticado
        {% if user.is_authenticated %}
            // Redirigir a la p√°gina de pagar suscripci√≥n
            window.location.href = "{% url 'pagar_suscripcion' %}?plan_id=" + planId;
        {% else %}
            // Si no est√° autenticado, mostrar mensaje y redirigir a login
            Swal.fire({
                icon: 'info',
                title: 'Inicia Sesi√≥n',
                text: 'Debes iniciar sesi√≥n para contratar un plan',
                confirmButtonText: 'Ir a Login',
                showCancelButton: true,
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = "{% url 'login' %}?next={% url 'pagar_suscripcion' %}%3Fplan_id=" + planId;
                }
            });
        {% endif %}
    });
});
</script>
{% endblock %}

